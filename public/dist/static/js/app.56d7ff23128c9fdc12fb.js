webpackJsonp([2],{"0dUj":function(e,t){},"34+y":function(e,t){},"97Sy":function(e,t){},ELVM:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("97Sy");var a=n("bCKv"),o=n.n(a),i=(n("ehhp"),n("NVmV")),s=n.n(i),r=(n("y+mr"),n("3JdW")),c=n.n(r),l=(n("ULTG"),n("oobK")),u=n.n(l),d=(n("0dUj"),n("IqSH")),f=n.n(d),m=(n("swY8"),n("gAYL")),p=n.n(m),h=(n("XDqQ"),n("Axha")),v=n.n(h),g=n("7+uW"),w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():t("router-view")],1)},staticRenderFns:[]};var _=n("VU/8")({name:"App"},w,!1,function(e){n("ELVM")},null,null).exports,N=n("/ocq"),T=(n("34+y"),n("X+yh")),y=n.n(T),L=n("//Fk"),I=n.n(L),b=n("bEHp"),E=n.n(b),k=n("mtWM"),U=n.n(k),x=n("QmSG"),A={name:"Index",data:function(){return{loading:!1,top_stories:[],stories:[],date:""}},mounted:function(){this.getLatestNews()},activated:function(){document.getElementById("container").scrollTop=this.$route.meta.scrollTop},beforeRouteLeave:function(e,t,n){document.getElementById("container").scrollTop,t.meta.scrollTop=document.getElementById("container").scrollTop,n()},methods:{loadTop:function(){var e=this;this.getLatestNews().then(function(){e.$refs.loadmore.onTopLoaded()})},getLatestNews:function(){var e=this;return new I.a(function(t,n){U.a.get(x.a+"/news/latest").then(function(n){if(200===n.status){var a=n.data,o=a.top_stories,i=a.stories,s=a.date;e.top_stories=o,e.date=parseInt(s)-1,i.forEach(function(t){t.images&&(t.images[0]=e.parseImageUrl(t.images[0]))}),e.stories=i,i.length<10&&e.getBeforeNews(),t()}}).catch(function(e){y()(e.response.data.error.message),n()})})},getBeforeNews:function(){var e=this;this.loading=!0;var t=parseInt(this.date);U.a.get(x.a+"/news/before/"+t).then(function(t){if(200===t.status){var n=t.data,a=n.stories,o=n.date;e.date=o,a.forEach(function(t){t.images&&(t.images[0]=e.parseImageUrl(t.images[0]))}),e.stories=e.stories.concat(a),e.loading=!1}}).catch(function(e){console.log(e),y()(e.response.data.error.message)})},parseImageUrl:function(e){if(e&&E.a.isString(e))return x.a+"/simulateRefer?image="+e},showNewsDetail:function(e){this.$router.push({name:"NewsDetail",params:{news:e}})}}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("mt-header",{attrs:{fixed:"",title:"纯净的知乎"}}),e._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.getBeforeNews,expression:"getBeforeNews"}],staticClass:"index-container",attrs:{id:"container","infinite-scroll-disabled":"loading","infinite-scroll-immediate-check":"false","infinite-scroll-distance":"10"}},[n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":e.loadTop}},[e._l(e.stories,function(t){return n("div",{staticClass:"stories-list",on:{click:function(n){e.showNewsDetail(t)}}},[n("img",{staticClass:"image",attrs:{src:t.images[0]}}),e._v(" "),n("div",{staticClass:"title"},[e._v(e._s(t.title))])])}),e._v(" "),n("div",{staticClass:"loading"},[n("mt-spinner",{attrs:{type:"snake",color:"#26a2ff"}})],1)],2)],1)],1)},staticRenderFns:[]};var D=n("VU/8")(A,B,!1,function(e){n("wqL8")},"data-v-bd8c431e",null).exports;g.default.use(N.a);var $=new N.a({routes:[{path:"/",name:"Index",component:D,meta:{keepAlive:!0,scrollTop:0}},{path:"/NewsDetail",name:"NewsDetail",component:function(){return n.e(0).then(n.bind(null,"pnim"))}}]});g.default.component(v.a.name,v.a),g.default.component(p.a.name,p.a),g.default.component(f.a.name,f.a),g.default.component(u.a.name,u.a),g.default.component(c.a.name,c.a),g.default.component(s.a.name,s.a),g.default.use(o.a),g.default.config.productionTip=!1,new g.default({el:"#app",router:$,components:{App:_},template:"<App/>"})},QmSG:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="http://47.52.72.58:3000"},ULTG:function(e,t){},XDqQ:function(e,t){},ehhp:function(e,t){},joTY:function(e,t){},swY8:function(e,t){},wqL8:function(e,t){},"y+mr":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.56d7ff23128c9fdc12fb.js.map